{% extends "base.html" %}

{% block auxCSS %}
<link rel="stylesheet" type="text/css" href="/static/css/details.css"></link>
{% endblock %}

{% block mainTitle %} TorStatus Router Details -- {{ relay.nickname}} {% endblock %}

{% block headerTitle %} TorStatus {% endblock %}

{% block mainPage %}

{% load details_filters %}

<table cellspacing="2" cellpadding="2" class="displayStatus">
<tr>
	<td id="mainLinks">
        Details for Relay: {{ relay.nickname }}
	</td>
</tr>
</table>

<br />
<br />

<table class="aggStatisticSummary" id="networkstatisticsummary">
<tr>
    <td class="boxTitle" colspan="2">General Information</td>
</tr>
<tr id="row_aggStatisticSummary">
	<td id="aggBox">Router Name:</td>
    <td id="aggBox">{{ relay.nickname}}</td>
</tr>
<tr id="row_aggStatisticSummary">
	<td id="aggBox">Fingerprint:</td>
    <td id="aggBox">{{ relay.fingerprint|format_fing}}</td>
</tr>
<tr id="row_aggStatisticSummary">
	<td id="aggBox">Contact:</td>
    <td id="aggBox">{{ relay.descriptorid.rawdesc|contact}}</td>
</tr>
<tr id="row_aggStatisticSummary">
	<td id="aggBox">IP Address:</td>
    <td id="aggBox">{{ relay.address}}</td>
</tr>
<tr id="row_aggStatisticSummary">
	<td id="aggBox">Hostname:</td>
    <td id="aggBox">{{ relay.address|hostname}}</td>
</tr>
<tr id="row_aggStatisticSummary">
	<td id="aggBox">Onion Router Port:</td>
    <td id="aggBox">{{ relay.orport}}</td>
</tr>
<tr id="row_aggStatisticSummary">
	<td id="aggBox">Directory Server Port:</td>
    <td id="aggBox">{{ relay.dirport}}</td>
</tr>
<tr id="row_aggStatisticSummary">
	<td id="aggBox">Country Code:</td>
    <td id="aggBox">{{ relay.geoip|country }}</td>
</tr>
<tr id="row_aggStatisticSummary">
    <td id="aggBox">Location (coordinates):</td>
    <td id="aggBox">{{ relay.geoip|latitude }}, {{ relay.geoip|longitude }}</td>
</tr>
<tr id="row_aggStatisticSummary">
	<td id="aggBox">Platform / Version:</td>
    <td id="aggBox">{{ relay.descriptorid.platform}}</td>
</tr>
<tr id="row_aggStatisticSummary">
	<td id="aggBox">Last Descriptor Published (GMT):</td>
    <td id="aggBox">{{ relay.descriptorid.published}}</td>
</tr>
<tr id="row_aggStatisticSummary">
	<td id="aggBox">Current Uptime:</td>
    <td id="aggBox">{{ relay.descriptorid.uptime|words}}</td>
</tr>
<tr id="row_aggStatisticSummary">
	<td id="aggBox">Bandwidth (Burst/Avg/Observed (bytes/sec)):</td>
    <td id="aggBox">{{ relay.descriptorid.bandwidthburst}} / {{ relay.descriptorid.bandwidthavg}} / {{ relay.descriptorid.bandwidthobserved}}</td>
</tr>
<tr id="row_aggStatisticSummary">
	<td id="aggBox">Family:</td>
    <td id="aggBox">{{ relay.descriptorid.rawdesc|family|safe}}</td> <!-- |safe|linebreaks}}</td> -->
</tr>
</table>

<br />

<table class="aggStatisticSummary" id="networkstatisticsummary">
<tr>
    <td class="boxTitle" colspan="2"> Graphs </td>
</tr>
<tr id="row_aggStatisticSummary">
    <td id="aggBox"><img src="{{ relay.fingerprint }}/readhist.png" alt="Read Bandwidth History Graph" title="Read Bandwidth History Graph"></td>
    <td id="aggBox"><img src="{{ relay.fingerprint }}/writehist.png" alt="Write Bandwidth History Graph" title="Write Bandwidth History Graph"></td>
</tr>
</table>

<br />


<table class="mainDetails">
<tr>
    <td>
        <table class="details">
            <tr>
                <td id="details_boxTitle"> Router Keys </td>
            </tr>
            <tr>
                <td>Onion Key:<pre>{{ relay.descriptorid.rawdesc|onion_key}}</pre></td>
            </tr>
            <tr>
                <td>Signing Key:<pre>{{ relay.descriptorid.rawdesc|signing_key}}</pre></td>
            </tr>
        </table>
    </td>
    <td>
        <table class="details">
            <tr>
                <td id="details_boxTitle" colspan="2"> Router Flags </td>
            </tr>
            
            <tr> 
                <td id="detailBox"> Authority: </td>
                <td {% if relay.isauthority %} id="iconYes" {% else %} id="iconNo" {% endif %}>  </td>
            </tr>
            <tr> 
                <td id="detailBox"> Bad Directory: </td>
                <td {% if relay.isbaddirectory %} id="iconYes" {% else %} id="iconNo" {% endif %}>  </td>
            </tr>
            <tr> 
                <td id="detailBox"> Bad Exit: </td>
                <td {% if relay.isbadexit %} id="iconYes" {% else %} id="iconNo" {% endif %}>  </td>
            </tr>
            <tr> 
                <td id="detailBox"> Exit: </td>
                <td {% if relay.isexit %} id="iconYes" {% else %} id="iconNo" {% endif %}>  </td>
            </tr>
            <tr> 
                <td id="detailBox"> Fast: </td>
                <td {% if relay.isfast %} id="iconYes" {% else %} id="iconNo" {% endif %}>  </td>
            </tr>
            <tr> 
                <td id="detailBox"> Guard: </td>
                <td {% if relay.isguard %} id="iconYes" {% else %} id="iconNo" {% endif %}>  </td>
            </tr>
            <tr> 
                <td id="detailBox"> Hibernating: </td>
                <td {% if relay.ishibernating %} id="iconYes" {% else %} id="iconNo" {% endif %}>  </td>
            </tr>
            <tr> 
                <td id="detailBox"> Named: </td>
                <td {% if relay.isnamed %} id="iconYes" {% else %} id="iconNo" {% endif %}>  </td>
            </tr>
            <tr> 
                <td id="detailBox"> Stable: </td>
                <td {% if relay.isstable %} id="iconYes" {% else %} id="iconNo" {% endif %}>  </td>
            </tr>
            <tr> 
                <td id="detailBox"> Running: </td>
                <td {% if relay.isrunning %} id="iconYes" {% else %} id="iconNo" {% endif %}>  </td>
            </tr>
            <tr> 
                <td id="detailBox"> Valid: </td>
                <td {% if relay.isvalid %} id="iconYes" {% else %} id="iconNo" {% endif %}>  </td>
            </tr>
            <tr> 
                <td id="detailBox"> V2Dir: </td>
                <td {% if relay.isauthority %} id="iconYes" {% else %} id="iconNo" {% endif %}>  </td>
            </tr>
        </table>
    </td>
    <td>
        <table class="details">
            <tr>
                <td id="details_boxTitle" colspan=100%> Exit Policy Information </td>
            </tr>
            <tr>
                <td id="detailBox">{% for line in relay.descriptorid.rawdesc|exitinfo %} 
                        {% if forloop.counter0|divisible_by:16 %}</td><td id="detailBox">{% endif %}   
                        {{ line}} <br />
                    {% endfor %}
                </td>
            </tr>
        </table>
    </td>
</tr>
</table>

{% endblock %}
